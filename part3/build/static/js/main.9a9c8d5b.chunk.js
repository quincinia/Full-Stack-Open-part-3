(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),o=t.n(c),a=t(7),r=t(3),u=t(2),i=t(4),s=t.n(i),l=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||3001,d="http://localhost:".concat(l,"/api/persons"),b=function(){return s.a.get(d).then((function(e){return e.data}))},j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=t(0),O=function(e){var n=e.message,t=n.message,c=n.type;return null===t?null:(console.log("message type: ",c),Object(h.jsx)("div",{className:c,children:t}))},g=function(e){return Object(h.jsxs)("div",{children:["filter shown with",Object(h.jsx)("input",{value:e.value,onChange:e.onChange})]})},v=function(e){return Object(h.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(h.jsxs)("div",{children:["name:",Object(h.jsx)("input",{value:e.name,onChange:e.onNameChange})]}),Object(h.jsxs)("div",{children:["number:",Object(h.jsx)("input",{value:e.number,onChange:e.onNumberChange})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){return Object(h.jsx)("div",{children:e.filteredList.map((function(n){return Object(h.jsxs)("div",{children:[n.name," ",n.number," ",Object(h.jsx)("button",{onClick:function(){return e.deleteName(n.id,n.name)},children:"delete"})]},n.name)}))})},x=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),i=Object(r.a)(o,2),s=i[0],l=i[1],d=Object(u.useState)(""),x=Object(r.a)(d,2),S=x[0],C=x[1],w=Object(u.useState)(""),y=Object(r.a)(w,2),N=y[0],T=y[1],E=Object(u.useState)({message:null,type:null}),_=Object(r.a)(E,2),k=_[0],D=_[1];Object(u.useEffect)((function(){console.log("Grabbing data from server"),b().then((function(e){return c(e)}))}),[]);var L=t.filter((function(e){var n=N.toLowerCase();return e.name.toLowerCase().includes(n)}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{message:k}),Object(h.jsx)(g,{value:N,onChange:function(e){console.log(e.target.value),T(e.target.value)}}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(v,{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s}))){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===s})),o=Object(a.a)(Object(a.a)({},n),{},{number:S});m(n.id,o).then((function(e){return c(t.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){D({message:"Information of ".concat(s," has already been removed from server"),type:"error"}),c(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){D({message:null,type:null})}),5e3)}))}}else j({name:s,number:S}).then((function(e){c(t.concat(e)),D({message:"Added ".concat(s),type:"success"}),l(""),C(""),setTimeout((function(){D({message:null,type:null})}),5e3)}))},name:s,onNameChange:function(e){console.log(e.target.value),l(e.target.value)},number:S,onNumberChange:function(e){console.log(e.target.value),C(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(p,{filteredList:L,deleteName:function(e,n){window.confirm("Delete ".concat(n,"?"))&&f(e).then((function(){c(t.filter((function(n){return n.id!==e})))}))}})]})};t(41);o.a.render(Object(h.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9a9c8d5b.chunk.js.map