(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),o=t.n(c),r=t(7),a=t(3),u=t(2),i=t(4),s=t.n(i),l=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT,"/api/persons"),d=function(){return s.a.get(l).then((function(e){return e.data}))},b=function(e){return s.a.post(l,e).then((function(e){return e.data}))},j=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=t(0),h=function(e){var n=e.message,t=n.message,c=n.type;return null===t?null:(console.log("message type: ",c),Object(m.jsx)("div",{className:c,children:t}))},O=function(e){return Object(m.jsxs)("div",{children:["filter shown with",Object(m.jsx)("input",{value:e.value,onChange:e.onChange})]})},g=function(e){return Object(m.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(m.jsxs)("div",{children:["name:",Object(m.jsx)("input",{value:e.name,onChange:e.onNameChange})]}),Object(m.jsxs)("div",{children:["number:",Object(m.jsx)("input",{value:e.number,onChange:e.onNumberChange})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){return Object(m.jsx)("div",{children:e.filteredList.map((function(n){return Object(m.jsxs)("div",{children:[n.name," ",n.number," ",Object(m.jsx)("button",{onClick:function(){return e.deleteName(n.id,n.name)},children:"delete"})]},n.name)}))})},p=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),i=Object(a.a)(o,2),s=i[0],l=i[1],p=Object(u.useState)(""),x=Object(a.a)(p,2),S=x[0],C=x[1],w=Object(u.useState)(""),y=Object(a.a)(w,2),N=y[0],T=y[1],E=Object(u.useState)({message:null,type:null}),_=Object(a.a)(E,2),k=_[0],D=_[1];Object(u.useEffect)((function(){console.log("Grabbing data from server"),d().then((function(e){return c(e)}))}),[]);var L=t.filter((function(e){var n=N.toLowerCase();return e.name.toLowerCase().includes(n)}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(h,{message:k}),Object(m.jsx)(O,{value:N,onChange:function(e){console.log(e.target.value),T(e.target.value)}}),Object(m.jsx)("h2",{children:"add a new"}),Object(m.jsx)(g,{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s}))){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===s})),o=Object(r.a)(Object(r.a)({},n),{},{number:S});f(n.id,o).then((function(e){return c(t.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){D({message:"Information of ".concat(s," has already been removed from server"),type:"error"}),c(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){D({message:null,type:null})}),5e3)}))}}else b({name:s,number:S}).then((function(e){c(t.concat(e)),D({message:"Added ".concat(s),type:"success"}),l(""),C(""),setTimeout((function(){D({message:null,type:null})}),5e3)}))},name:s,onNameChange:function(e){console.log(e.target.value),l(e.target.value)},number:S,onNumberChange:function(e){console.log(e.target.value),C(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(v,{filteredList:L,deleteName:function(e,n){window.confirm("Delete ".concat(n,"?"))&&j(e).then((function(){c(t.filter((function(n){return n.id!==e})))}))}})]})};t(41);o.a.render(Object(m.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.be59ea38.chunk.js.map